Compspec, a compiler for XXX
=====================================================================

[User Manual](XXXX)
-------------


Installation via Opam
---------------------
TODO

Compilation from the sources
----------------------------

You can get the sources using `git` as follows:
```bash
git clone git@gitlab.lip6.fr:lprosperi/compiler.git
```

Dependencies are described in `compspec.opam`. For building the source
code documentation, one needs
[odoc](https://github.com/ocaml/odoc). For building the User Manual,
see `docs/README.md`.

Using Opam, a suitable OCaml environment can be setup as follows (automated script ``requirements.sh``):
```bash
opam switch 4.12.0
opam install yaml ounit2 process rresult pprint ppx_deriving menhir bos fileutils
```

To compile Compspec, just run the command `make` in the source directory.
This produces the `_build/install/default/bin/compspec` binary.
Use the `--help` option for more information. Other make targets are:

```bash
make                        # Build compspec 
#make doc                    # Build the user documentation (avalaible on readthedocs)
make odoc                   # Build the developer documentation
make install                # Install compspec 
#make vscode                 # Install vscode extension
make tests
```

**Note:** you can run `compspec` without installing it with `dune exec -- compspec`.

**Note:** the starting file of the source code html documentation is
`_build/default/_doc/_html/compspec/index.html`.

The following commands can be used to clean up the repository:
```bash
make clean     # Removes files generated by OCaml.
make distclean # Same as clean, but also removes library checking files.
```
### Usage (without installing) 
```bash
make run -- compile --debug --places examples/kvs/places.yml --targets examples/kvs/targets.yml --filename examples/kvs/kvs.spec
```

```
make run -- info
```

Compile the akka source code generated by the Lg4DC compiler
```
docker build .
```

Start a compiler with the compiled jar
```
docker-compose up
```